<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jlog Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0d1117; color: #c9d1d9; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { color: #58a6ff; margin-bottom: 20px; }
        h2 { color: #8b949e; margin: 20px 0 10px; font-size: 1.1em; text-transform: uppercase; }

        /* Tabs */
        .tabs { display: flex; gap: 5px; margin-bottom: 20px; border-bottom: 1px solid #30363d; }
        .tab { padding: 12px 24px; background: transparent; border: none; color: #8b949e; font-size: 1em; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab:hover { color: #c9d1d9; background: #21262d; }
        .tab.active { color: #58a6ff; border-bottom-color: #58a6ff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 20px; text-align: center; }
        .card .value { font-size: 2em; font-weight: bold; }
        .card .label { color: #8b949e; font-size: 0.9em; }
        .card.critical .value { color: #f85149; }
        .card.error .value { color: #f85149; }
        .card.warning .value { color: #d29922; }
        .card.info .value { color: #58a6ff; }
        .charts { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .chart-container { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 20px; }
        .chart-container.full-width { grid-column: 1 / -1; }
        .patterns { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 30px; }
        .pattern-card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 15px; flex: 1; min-width: 200px; }
        .pattern-card.critical { border-color: #f85149; }
        .pattern-card.warning { border-color: #d29922; }
        .pattern-card.info { border-color: #58a6ff; }
        .pattern-card .icon { font-size: 1.5em; margin-right: 10px; }
        .pattern-card strong { color: #c9d1d9; }
        .pattern-card p { color: #8b949e; margin-top: 5px; font-size: 0.9em; }
        table { width: 100%; border-collapse: collapse; background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #30363d; }
        th { background: #21262d; color: #8b949e; font-weight: 600; }
        td.count { color: #f85149; font-weight: bold; width: 80px; }
        tr:hover { background: #21262d; }

        /* Sparkline mini chart */
        .sparkline { display: flex; align-items: flex-end; gap: 2px; height: 30px; width: 120px; }
        .spark-bar { width: 8px; background: #58a6ff; border-radius: 2px 2px 0 0; min-height: 2px; }

        /* Legend for trends */
        .trends-legend { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; padding: 15px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; }
        .legend-item { display: flex; align-items: center; gap: 5px; font-size: 0.85em; }
        .legend-color { width: 12px; height: 12px; border-radius: 2px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š jlog Analysis Report</h1>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">Overview</button>
            <button class="tab" onclick="showTab('trends')">Message Trends</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2>Summary</h2>
            <div class="summary">
                <div class="card info"><div class="value">47</div><div class="label">Lines Read</div></div>
                <div class="card info"><div class="value">47</div><div class="label">Entries Matched</div></div>
                <div class="card critical"><div class="value">1</div><div class="label">Critical</div></div>
                <div class="card error"><div class="value">6</div><div class="label">Errors</div></div>
                <div class="card warning"><div class="value">17</div><div class="label">Warnings</div></div>
            </div>

            <h2>Patterns Detected</h2>
            <div class="patterns">
                <div class="pattern-card critical"><span class="icon">ðŸ”´</span><strong>SSH Brute Force Attempt</strong><p>10 failed password attempts</p></div>
<div class="pattern-card critical"><span class="icon">ðŸ”´</span><strong>Out of Memory</strong><p>1 OOM killer events</p></div>
<div class="pattern-card warning"><span class="icon">ðŸŸ¡</span><strong>Disk Issues</strong><p>2 disk-related issues</p></div>
<div class="pattern-card info"><span class="icon">ðŸ”µ</span><strong>Firewall Blocks</strong><p>2 blocked connections</p></div>
            </div>

            <h2>Charts</h2>
            <div class="charts">
                <div class="chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="priorityChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="serviceChart"></canvas>
                </div>
            </div>

            <h2>Top Error Messages</h2>
            <table>
                <thead><tr><th>#</th><th>Count</th><th>Message</th></tr></thead>
                <tbody><tr><td>1</td><td class="count">5</td><td>Failed password for invalid user admin from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>2</td><td class="count">1</td><td>Failed password for invalid user mysql from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>3</td><td class="count">1</td><td>GET /api/admin HTTP/1.1 403 45 0.002</td></tr>
<tr><td>4</td><td class="count">1</td><td>WARNING: disk usage above 90%, consider cleanup</td></tr>
<tr><td>5</td><td class="count">1</td><td>Failed password for invalid user root from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>6</td><td class="count">1</td><td>upstream timed out (110: Connection timed out) while reading response header from upstream</td></tr>
<tr><td>7</td><td class="count">1</td><td>WARNING: connection pool exhausted, waiting for available connection</td></tr>
<tr><td>8</td><td class="count">1</td><td>Out of memory: Killed process 4521 (java) total-vm:8234567kB, anon-rss:4123456kB</td></tr>
<tr><td>9</td><td class="count">1</td><td>ERROR: Failed to process request: connection reset by peer</td></tr>
<tr><td>10</td><td class="count">1</td><td>GET /api/orders HTTP/1.1 504 89 30.001</td></tr>
<tr><td>11</td><td class="count">1</td><td>Failed password for invalid user ubuntu from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>12</td><td class="count">1</td><td>ERROR: Database connection timeout after 30000ms</td></tr>
<tr><td>13</td><td class="count">1</td><td>Failed password for invalid user test from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>14</td><td class="count">1</td><td>ERROR: MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk</td></tr>
<tr><td>15</td><td class="count">1</td><td>[UFW BLOCK] IN=eth0 OUT= MAC=00:11:22:33:44:55 SRC=&lt;IP&gt; DST=&lt;IP&gt; PROTO=TCP DPT=3306</td></tr>
<tr><td>16</td><td class="count">1</td><td>Failed password for invalid user postgres from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>17</td><td class="count">1</td><td>[UFW BLOCK] IN=eth0 OUT= MAC=00:11:22:33:44:55 SRC=&lt;IP&gt; DST=&lt;IP&gt; PROTO=TCP DPT=22</td></tr>
<tr><td>18</td><td class="count">1</td><td>myapp.service: Main process exited, code=killed, status=9/KILL</td></tr>
<tr><td>19</td><td class="count">1</td><td>ERROR: connection limit exceeded for non-superusers</td></tr>
<tr><td>20</td><td class="count">1</td><td>CRITICAL: CPU temperature above threshold, cpu clock throttled</td></tr></tbody>
            </table>
        </div>

        <!-- Trends Tab -->
        <div id="trends" class="tab-content">
            <h2>Message Frequency Over Time</h2>
            <p style="color: #8b949e; margin-bottom: 20px;">Track how frequently each error message appears over time to identify patterns and spikes.</p>

            <div class="charts">
                <div class="chart-container full-width">
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>

            <h2>Top Messages with Trend</h2>
            <table>
                <thead><tr><th>#</th><th>Total</th><th>Trend</th><th>Message</th></tr></thead>
                <tbody><tr><td>1</td><td class="count">5</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>Failed password for invalid user admin from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>2</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>Failed password for invalid user mysql from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>3</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>GET /api/admin HTTP/1.1 403 45 0.002</td></tr>
<tr><td>4</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>WARNING: disk usage above 90%, consider cleanup</td></tr>
<tr><td>5</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>Failed password for invalid user root from &lt;IP&gt; port &lt;PORT&gt; ssh2</td></tr>
<tr><td>6</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>upstream timed out (110: Connection timed out) while reading response header from upstream</td></tr>
<tr><td>7</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>WARNING: connection pool exhausted, waiting for available connection</td></tr>
<tr><td>8</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>Out of memory: Killed process 4521 (java) total-vm:8234567kB, anon-rss:4123456kB</td></tr>
<tr><td>9</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>ERROR: Failed to process request: connection reset by peer</td></tr>
<tr><td>10</td><td class="count">1</td><td class="sparkline"><div class="spark-bar" style="height: 100%"></div></td><td>GET /api/orders HTTP/1.1 504 89 30.001</td></tr></tbody>
            </table>
        </div>
    </div>

    <script>
        // Tab switching
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
        }

        // Time series chart
        new Chart(document.getElementById('timeChart'), {
            type: 'line',
            data: {
                labels: ["2024-01-01 00:00"],
                datasets: [
                    { label: 'Total', data: [47], borderColor: '#58a6ff', fill: false },
                    { label: 'Errors', data: [7], borderColor: '#f85149', fill: false },
                    { label: 'Warnings', data: [17], borderColor: '#d29922', fill: false }
                ]
            },
            options: {
                responsive: true,
                plugins: { title: { display: true, text: 'Log Volume Over Time', color: '#c9d1d9' } },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } }
                }
            }
        });

        // Priority distribution
        new Chart(document.getElementById('priorityChart'), {
            type: 'doughnut',
            data: {
                labels: ["EMERG","ALERT","CRIT","ERR","WARN","NOTICE","INFO","DEBUG"],
                datasets: [{ data: [0,0,1,6,17,1,22,0], backgroundColor: ['#f85149','#f85149','#f85149','#da3633','#d29922','#58a6ff','#8b949e','#484f58'] }]
            },
            options: {
                responsive: true,
                plugins: { title: { display: true, text: 'Priority Distribution', color: '#c9d1d9' }, legend: { labels: { color: '#c9d1d9' } } }
            }
        });

        // Top services
        new Chart(document.getElementById('serviceChart'), {
            type: 'bar',
            data: {
                labels: ["sshd","nginx","systemd","docker","myapp","ufw","apt","backup.sh","redis","kernel"],
                datasets: [{ label: 'Log Count', data: [12,10,5,4,2,2,2,2,2,2], backgroundColor: '#58a6ff' }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: { title: { display: true, text: 'Top Services', color: '#c9d1d9' }, legend: { display: false } },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } }
                }
            }
        });

        // Message trends chart
        new Chart(document.getElementById('trendsChart'), {
            type: 'line',
            data: {
                labels: ["2024-01-01 00:00"],
                datasets: [
                    { label: "Failed password for invalid user admin from <IP> p...", data: [5], borderColor: '#58a6ff', backgroundColor: '#58a6ff22', fill: false, tension: 0.1 },
                    { label: "Failed password for invalid user mysql from <IP> p...", data: [1], borderColor: '#f85149', backgroundColor: '#f8514922', fill: false, tension: 0.1 },
                    { label: "GET /api/admin HTTP/1.1 403 45 0.002", data: [1], borderColor: '#d29922', backgroundColor: '#d2992222', fill: false, tension: 0.1 },
                    { label: "WARNING: disk usage above 90%, consider cleanup", data: [1], borderColor: '#3fb950', backgroundColor: '#3fb95022', fill: false, tension: 0.1 },
                    { label: "Failed password for invalid user root from <IP> po...", data: [1], borderColor: '#a371f7', backgroundColor: '#a371f722', fill: false, tension: 0.1 },
                    { label: "upstream timed out (110: Connection timed out) whi...", data: [1], borderColor: '#f778ba', backgroundColor: '#f778ba22', fill: false, tension: 0.1 },
                    { label: "WARNING: connection pool exhausted, waiting for av...", data: [1], borderColor: '#79c0ff', backgroundColor: '#79c0ff22', fill: false, tension: 0.1 },
                    { label: "Out of memory: Killed process 4521 (java) total-vm...", data: [1], borderColor: '#ffa657', backgroundColor: '#ffa65722', fill: false, tension: 0.1 },
                    { label: "ERROR: Failed to process request: connection reset...", data: [1], borderColor: '#56d364', backgroundColor: '#56d36422', fill: false, tension: 0.1 },
                    { label: "GET /api/orders HTTP/1.1 504 89 30.001", data: [1], borderColor: '#ff7b72', backgroundColor: '#ff7b7222', fill: false, tension: 0.1 }
                ]
            },
            options: {
                responsive: true,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    title: { display: true, text: 'Message Frequency Over Time', color: '#c9d1d9' },
                    legend: {
                        position: 'bottom',
                        labels: { color: '#c9d1d9', boxWidth: 12, padding: 15 }
                    }
                },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' }, beginAtZero: true }
                }
            }
        });
    </script>
</body>
</html>